-- ============================================================
-- v1.4: quiz_view のセキュリティ修正
-- ============================================================
-- 実行前提: v1.3.sql が適用済みであること
-- 実行内容:
--   1. quiz_view に security_invoker = true を設定
--      ビューのクエリが呼び出し元ユーザーの権限で実行されるようにし、
--      RLS を正しく適用させる
-- ============================================================

-- quiz_view のセキュリティ設定を変更
-- security_invoker = true により、ビューのクエリは呼び出し元ユーザーの権限で実行される
ALTER VIEW public.quiz_view SET (security_invoker = true);
